<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register Main Page</title>
  <style>
    body {
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
      background-color: #dde7fc;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 90vh;
    }

    .container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 400px;
      padding: 8px;
      text-align: center;
    }

    button {
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
      background-color: #163e96;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 7px;
      cursor: pointer;
      margin-top: 8px;
      margin-bottom: 8px;
      font-size: 16px;
      width: 120px;
      align-self: center;
    }

    button:hover {
      background-color: #1d4ed8;
    }

    .button-row {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 8px;
    }

    .hidden {
      display: none;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 7px;
      text-align: left;
    }

    input {
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 14px;
    }

    .error {
      color: #9f1c1c;
      font-size: 13px;
    }

    .success {
      color: #3e7d41;
      font-weight: bold;
      margin-top: 8px;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>

<body>
  <div id="main-container" class="container">
    <h1>Main Page</h1>
    <p>Register to find out more.</p>
    <button id="btn-register">Register</button>
  </div>

  <div id="form-container" class="container hidden">
    <h2>Register Form</h2>
    <form id="registerForm">
      <label>Name and Last Names</label>
      <input type="text" id="name" required>
      <span id="error-name" class="error"></span>

      <label>Email:</label>
      <input type="email" id="email" required>
      <span id="error-email" class="error"></span>

      <label>Phone Number:</label>
      <input type="text" id="phone-number" required>
      <span id="error-phone-number" class="error"></span>

      <label>Password:</label>
      <input type="password" id="password" required>
      <span id="error-password" class="error"></span>

      <div class="button-row">
        <button type="submit">Submit</button>
        <button type="button" id="cancel">Cancel</button>
      </div>

      <div id="message" class="success"></div>
    </form>
  </div>

  <script>
    $(document).ready(function(){
      $("#btn-register").on("click", function(){
        $("#main-container").addClass("hidden");
        $("#form-container").removeClass("hidden");
      });

      $("#cancel").on("click", function(){
        $("#registerForm")[0].reset();
        cleanMistakes();
        $("#message").text("");
        $("#form-container").addClass("hidden");
        $("#main-container").removeClass("hidden");
      });

      $("#registerForm").on("submit", function(e){
        e.preventDefault();
        cleanMistakes();
        $("#message").text("");

        const name = $("#name").val().trim();
        const email = $("#email").val().trim();
        const phoneNumber = $("#phone-number").val().trim();
        const password = $("#password").val().trim();

        let valid = true;

        const nameRegex = /^[A-Za-zÁÉÍÓÚáéíóúÑñ'-]+(\s+[A-Za-zÁÉÍÓÚáéíóúÑñ'-]+)+$/;
        if (!nameRegex.test(name)) {
          showError("#error-name", "It must only contain letters and include both name and surname.");
          valid = false;
        }

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          showError("#error-email", "Email format invalid.");
          valid = false;
        }

        const phoneNbRegex = /^\d{9}$/;
        if (!phoneNbRegex.test(phoneNumber)) {
          showError("#error-phone-number", "Only numbers are allowed (no spaces).");
          valid = false;
        }

        const passRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
        if (!passRegex.test(password)) {
          showError("#error-password", "At least 8 characters, one uppercase, one lowercase, and one number.");
          valid = false;
        }

        if (valid) {
          $("#message").text("✅ Register completed correctly.");
          $("#registerForm")[0].reset();
        }
      });

      function showError(id, message) {
        $(id).text(message);
      }

      function cleanMistakes() {
        $(".error").text("");
      }
    });
  </script>
</body>
</html>
